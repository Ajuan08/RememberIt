"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8078],{8078:(L,l,r)=>{r.r(l),r.d(l,{ListadoPageModule:()=>C});var d=r(177),g=r(4341),n=r(1075),m=r(8621),p=r(467),u=r(8378),h=r(432),t=r(4438),f=r(4796),F=r(4035);function P(o,s){if(1&o){const a=t.RV6();t.j41(0,"ion-col",1)(1,"ion-card",2),t.bIt("click",function(){const e=t.eBV(a).$implicit,c=t.XpG();return t.Njj(c.openEditarCita(e))}),t.j41(2,"ion-card-header")(3,"ion-card-subtitle",3),t.EFF(4,"Cita"),t.k0s(),t.j41(5,"ion-card-title"),t.EFF(6),t.k0s(),t.j41(7,"ion-card-subtitle"),t.EFF(8),t.k0s()(),t.j41(9,"ion-card-content")(10,"p"),t.EFF(11),t.nI1(12,"date"),t.k0s()()()()}if(2&o){const a=s.$implicit;t.R7$(6),t.JRh(a.medico.nombre),t.R7$(2),t.JRh(a.medico.especialidad),t.R7$(3),t.SpI("Fecha y Hora: ",t.i5U(12,3,a.fechaHora,"short"),"")}}function v(o,s){if(1&o){const a=t.RV6();t.j41(0,"ion-col",1)(1,"ion-card",4),t.bIt("click",function(){const e=t.eBV(a).$implicit,c=t.XpG();return t.Njj(c.openEditarMedicamento(e))}),t.j41(2,"ion-card-header")(3,"ion-card-subtitle",3),t.EFF(4,"Medicamento"),t.k0s(),t.j41(5,"ion-card-title"),t.EFF(6),t.k0s()(),t.j41(7,"ion-card-content")(8,"p"),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"p"),t.EFF(12),t.k0s(),t.j41(13,"p"),t.EFF(14),t.k0s()()()()}if(2&o){const a=s.$implicit;t.R7$(6),t.JRh(a.nombreMedicamento),t.R7$(3),t.SpI("Fecha de Fin: ",t.i5U(10,4,a.fechaFin,"shortDate"),""),t.R7$(3),t.SpI("Dosis Diarias: ",a.dosisDiarias,""),t.R7$(2),t.SpI("Anotaciones: ",a.anotaciones,"")}}const M=[{path:"",component:(()=>{var o;class s{getDate(i){throw new Error("Method not implemented.")}constructor(i,e,c){this.authService=i,this.firestoreService=e,this.modalController=c,this.email="",this.citas=[],this.medicamentos=[],this.today=(new Date).toISOString()}ngOnInit(){this.email=this.authService.getCurrentUserEmail(),this.loadCitas(),this.loadMedicamentos()}loadCitas(){this.firestoreService.getCollection("citas").subscribe(i=>{this.citas=i.map(e=>{const c=e.payload.doc.data();return c.id=e.payload.doc.id,c}).filter(e=>e.email===this.email&&e.fechaHora>this.today)})}loadMedicamentos(){this.firestoreService.getCollection("medicamentos").subscribe(i=>{this.medicamentos=i.map(e=>{const c=e.payload.doc.data();return c.id=e.payload.doc.id,c}).filter(e=>e.email===this.email&&e.fechaFin>this.today)})}openEditarMedicamento(i){var e=this;return(0,p.A)(function*(){return yield(yield e.modalController.create({component:u.D,componentProps:{medicamento:i}})).present()})()}openEditarCita(i){var e=this;return(0,p.A)(function*(){return yield(yield e.modalController.create({component:h.g,componentProps:{cita:i}})).present()})()}}return(o=s).\u0275fac=function(i){return new(i||o)(t.rXU(f.u),t.rXU(F.B),t.rXU(n.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-listado"]],decls:9,vars:2,consts:[["size","12",4,"ngFor","ngForOf"],["size","12"],[1,"cita-card",3,"click"],[1,"card-type"],[1,"medicamento-card",3,"click"]],template:function(i,e){1&i&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Listado"),t.k0s()()(),t.j41(4,"ion-content")(5,"ion-grid")(6,"ion-row"),t.DNE(7,P,13,6,"ion-col",0)(8,v,15,7,"ion-col",0),t.k0s()()()),2&i&&(t.R7$(7),t.Y8G("ngForOf",e.citas),t.R7$(),t.Y8G("ngForOf",e.medicamentos))},dependencies:[d.Sq,n.b_,n.I9,n.ME,n.HW,n.tN,n.hU,n.W9,n.lO,n.eU,n.ln,n.BC,n.ai,d.vh],styles:[".cita-card[_ngcontent-%COMP%]{--background: #e0f7fa;margin-bottom:20px}.medicamento-card[_ngcontent-%COMP%]{--background: #ffebee;margin-bottom:20px}.card-type[_ngcontent-%COMP%]{color:gray;font-size:.8em}ion-card-title[_ngcontent-%COMP%]{font-size:1.2em}ion-card-subtitle[_ngcontent-%COMP%]{font-size:.9em;color:gray}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]}),s})()}];let y=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[m.iI.forChild(M),m.iI]}),s})(),C=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[d.MD,g.YN,n.bv,y]}),s})()}}]);