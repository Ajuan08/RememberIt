"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1849],{1849:(F,f,l)=>{l.r(f),l.d(f,{PerfilPageModule:()=>v});var g=l(177),s=l(4341),a=l(1075),c=l(8621),u=l(467),p=l(963),e=l(4438),m=l(4796),h=l(4035);function P(n,d){if(1&n){const o=e.RV6();e.j41(0,"div",3)(1,"p",4),e.EFF(2),e.k0s(),e.j41(3,"p",5),e.EFF(4),e.k0s(),e.j41(5,"p",6),e.EFF(6),e.k0s(),e.j41(7,"p",7),e.EFF(8),e.k0s(),e.j41(9,"ion-button",8),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.toggleEdit())}),e.EFF(10,"Editar Perfil"),e.k0s(),e.j41(11,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.logout())}),e.EFF(12,"Cerrar Sesi\xf3n"),e.k0s()()}if(2&n){const o=e.XpG();e.R7$(2),e.JRh(o.nombre),e.R7$(2),e.JRh(o.email),e.R7$(2),e.SpI("",o.edad," a\xf1os"),e.R7$(2),e.SpI("G\xe9nero: ",o.genero,"")}}function b(n,d){if(1&n){const o=e.RV6();e.j41(0,"div",3)(1,"ion-item")(2,"ion-label",10),e.EFF(3,"Nombre"),e.k0s(),e.j41(4,"ion-input",11),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.editNombre,t)||(r.editNombre=t),e.Njj(t)}),e.k0s()(),e.j41(5,"ion-item")(6,"ion-label",10),e.EFF(7,"Edad"),e.k0s(),e.j41(8,"ion-input",12),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.editEdad,t)||(r.editEdad=t),e.Njj(t)}),e.k0s()(),e.j41(9,"ion-item")(10,"ion-label",10),e.EFF(11,"G\xe9nero"),e.k0s(),e.j41(12,"ion-input",11),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.editGenero,t)||(r.editGenero=t),e.Njj(t)}),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",10),e.EFF(15,"Foto de Perfil"),e.k0s(),e.j41(16,"input",13),e.bIt("change",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.onFileSelected(t))}),e.k0s()(),e.j41(17,"ion-button",14),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.saveProfile())}),e.EFF(18,"Guardar Cambios"),e.k0s(),e.j41(19,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.toggleEdit())}),e.EFF(20,"Cancelar"),e.k0s()()}if(2&n){const o=e.XpG();e.R7$(4),e.R50("ngModel",o.editNombre),e.R7$(4),e.R50("ngModel",o.editEdad),e.R7$(4),e.R50("ngModel",o.editGenero)}}const _=[{path:"",component:(()=>{var n;class d{constructor(i,t,r){this.authService=i,this.firestoreService=t,this.router=r,this.email="",this.isEditing=!1}ngOnInit(){this.email=this.authService.getCurrentUserEmail(),this.email&&this.firestoreService.getUserProfile(this.email).subscribe(i=>{i&&i.length>0&&(this.nombre=i[0].nombre,this.edad=i[0].edad,this.genero=i[0].genero,this.profileImageUrl=i[0].profileImageUrl,this.editNombre=this.nombre,this.editEdad=this.edad,this.editGenero=this.genero)})}toggleEdit(){this.isEditing=!this.isEditing}saveProfile(){var i=this;if(this.email&&this.editNombre&&void 0!==this.editEdad&&this.editGenero){const t={nombre:this.editNombre,edad:this.editEdad,genero:this.editGenero},r=()=>{this.firestoreService.updateUserProfile(this.email,t).then((0,u.A)(function*(){i.nombre=i.editNombre,i.edad=i.editEdad,i.genero=i.editGenero,i.isEditing=!1,yield p.W.schedule({notifications:[{title:"Perfil Actualizado",body:"Se ha modificado el perfil",id:1,schedule:{at:new Date(Date.now()+1e3)},sound:"../../android/app/src/main/res/raw/beep.wav",attachments:void 0,actionTypeId:"",extra:null}]})}))};this.selectedFile?this.firestoreService.uploadProfileImage(this.selectedFile,this.email).subscribe(j=>{t.profileImageUrl=j,r()}):r()}}logout(){this.authService.logout().then(()=>{this.router.navigateByUrl("/login")})}onFileSelected(i){this.selectedFile=i.target.files[0]}}return(n=d).\u0275fac=function(i){return new(i||n)(e.rXU(m.u),e.rXU(h.B),e.rXU(c.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-perfil"]],decls:9,vars:3,consts:[[1,"profile-container"],["alt","Perfil",1,"profile-image",3,"src"],["class","profile-info",4,"ngIf"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],[1,"profile-age"],[1,"profile-gender"],["expand","full","shape","round","fill","outline","color","secondary",3,"click"],["expand","full","shape","round","fill","outline","color","danger",3,"click"],["position","stacked"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["type","file",3,"change"],["expand","full","shape","round","fill","outline","color","primary",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Perfil"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",0),e.nrm(6,"img",1),e.DNE(7,P,13,4,"div",2)(8,b,21,3,"div",2),e.k0s()()),2&i&&(e.R7$(6),e.Y8G("src",t.profileImageUrl||"assets/images/perfil.png",e.B4B),e.R7$(),e.Y8G("ngIf",!t.isEditing),e.R7$(),e.Y8G("ngIf",t.isEditing))},dependencies:[g.bT,s.BC,s.vS,a.Jm,a.W9,a.eU,a.$w,a.uz,a.he,a.BC,a.ai,a.su,a.Gw],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background:linear-gradient(135deg,#f3f3f3,#e0e0e0);border-radius:10px;box-shadow:0 4px 6px #0000001a;max-width:400px;margin:20px auto}.profile-image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;border:4px solid #fff;box-shadow:0 4px 6px #0000001a;margin-bottom:20px}.profile-info[_ngcontent-%COMP%]{text-align:center}.profile-name[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:#333;margin-bottom:10px}.profile-email[_ngcontent-%COMP%]{font-size:1.2em;color:#666;margin-bottom:10px}.profile-age[_ngcontent-%COMP%], .profile-gender[_ngcontent-%COMP%]{font-size:1em;color:#888;margin-bottom:5px}ion-button[_ngcontent-%COMP%]{--border-radius: 20px;--background: linear-gradient(135deg, #ff5f6d, #ffc371);--background-activated: linear-gradient(135deg, #ff5f6d, #ffc371);--background-focused: linear-gradient(135deg, #ff5f6d, #ffc371);--box-shadow: 0 4px 6px rgba(0, 0, 0, .1);margin-top:20px}"]}),d})()}];let x=(()=>{var n;class d{}return(n=d).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[c.iI.forChild(_),c.iI]}),d})(),v=(()=>{var n;class d{}return(n=d).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.MD,s.YN,a.bv,x]}),d})()}}]);