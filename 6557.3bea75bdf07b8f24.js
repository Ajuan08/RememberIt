"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6557],{6557:(P,h,r)=>{r.r(h),r.d(h,{MedicamentoPageModule:()=>v});var M=r(177),c=r(4341),a=r(1075),m=r(8621),u=r(467),g=r(963),e=r(4438),f=r(4796),p=r(4035);const F=[{path:"",component:(()=>{var i;class d{constructor(n,o,s,t,y){this.authService=n,this.firestoreService=o,this.router=s,this.pickerController=t,this.alertController=y,this.email="",this.nombreMedicamento="",this.fechaFin="",this.dosisDiarias=1,this.anotaciones="",this.today=(new Date).toISOString().split("T")[0]}ngOnInit(){this.email=this.authService.getCurrentUserEmail(),this.fechaFin=this.today}openPicker(){var n=this;return(0,u.A)(function*(){yield(yield n.pickerController.create({columns:[{name:"dosis",options:Array.from({length:10},(s,t)=>({text:`${t+1}`,value:t+1}))}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",handler:s=>{n.dosisDiarias=s.dosis.value}}]})).present()})()}addMedicamento(){var n=this;return(0,u.A)(function*(){if(n.email&&n.nombreMedicamento&&n.fechaFin&&n.dosisDiarias>0){const o={email:n.email,nombreMedicamento:n.nombreMedicamento,fechaFin:n.fechaFin,dosisDiarias:n.dosisDiarias,anotaciones:n.anotaciones};try{yield n.firestoreService.createDoc("medicamentos",o),console.log("Medicamento a\xf1adido"),n.presentConfirmationAlert(),yield g.W.schedule({notifications:[{title:"Medicamento A\xf1adido",body:`Se ha a\xf1adido el medicamento ${n.nombreMedicamento} hasta el d\xeda ${n.fechaFin}`,id:1,schedule:{at:new Date(Date.now()+1e3)},sound:"../../android/app/src/main/res/raw/beep.wav",attachments:void 0,actionTypeId:"",extra:null}]})}catch(s){console.error("Error al a\xf1adir el medicamento:",s)}}else console.error("Todos los campos son requeridos")})()}presentConfirmationAlert(){var n=this;return(0,u.A)(function*(){yield(yield n.alertController.create({header:"Confirmaci\xf3n",message:"El medicamento ha sido a\xf1adido correctamente.",buttons:[{text:"Aceptar",handler:()=>{n.router.navigateByUrl("/tabs/listado")}}]})).present()})()}}return(i=d).\u0275fac=function(n){return new(n||i)(e.rXU(f.u),e.rXU(p.B),e.rXU(m.Ix),e.rXU(a.He),e.rXU(a.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-medicamento"]],decls:27,vars:6,consts:[["position","floating"],["type","text",3,"ngModelChange","ngModel"],["presentation","date","display-format","MM/DD/YYYY","picker-format","MM/DD/YYYY",3,"ngModelChange","min","ngModel","value"],["button","",3,"click"],["slot","end"],[3,"ngModelChange","ngModel"],["expand","full",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"A\xf1adir Medicamento"),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-grid")(6,"ion-row")(7,"ion-col")(8,"ion-item")(9,"ion-label",0),e.EFF(10,"Nombre del Medicamento"),e.k0s(),e.j41(11,"ion-input",1),e.mxI("ngModelChange",function(t){return e.DH7(o.nombreMedicamento,t)||(o.nombreMedicamento=t),t}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-label",0),e.EFF(14,"Fecha de Fin"),e.k0s(),e.j41(15,"ion-datetime",2),e.mxI("ngModelChange",function(t){return e.DH7(o.fechaFin,t)||(o.fechaFin=t),t}),e.k0s()(),e.j41(16,"ion-item",3),e.bIt("click",function(){return o.openPicker()}),e.j41(17,"ion-label"),e.EFF(18,"Dosis Diarias"),e.k0s(),e.j41(19,"ion-note",4),e.EFF(20),e.k0s()(),e.j41(21,"ion-item")(22,"ion-label",0),e.EFF(23,"Anotaciones"),e.k0s(),e.j41(24,"ion-textarea",5),e.mxI("ngModelChange",function(t){return e.DH7(o.anotaciones,t)||(o.anotaciones=t),t}),e.k0s()(),e.j41(25,"ion-button",6),e.bIt("click",function(){return o.addMedicamento()}),e.EFF(26,"A\xf1adir Medicamento"),e.k0s()()()()()),2&n&&(e.R7$(11),e.R50("ngModel",o.nombreMedicamento),e.R7$(4),e.FS9("min",o.today),e.FS9("value",o.today),e.R50("ngModel",o.fechaFin),e.R7$(5),e.JRh(o.dosisDiarias),e.R7$(4),e.R50("ngModel",o.anotaciones))},dependencies:[c.BC,c.vS,a.Jm,a.hU,a.W9,a.A9,a.lO,a.eU,a.$w,a.uz,a.he,a.JI,a.ln,a.nc,a.BC,a.ai,a.Je,a.Gw]}),d})()}];let C=(()=>{var i;class d{}return(i=d).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.iI.forChild(F),m.iI]}),d})(),v=(()=>{var i;class d{}return(i=d).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[M.MD,c.YN,a.bv,C]}),d})()}}]);